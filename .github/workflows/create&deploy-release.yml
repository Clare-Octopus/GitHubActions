name: GitHub Actions Create and Deploy Release
on:
  push:
    branches:
      - main
jobs:
  deployment:
    runs-on: ubuntu-latest
    env:
     OCTOPUS_API_KEY: ${{ secrets.OCTOPUS_API_KEY  }}
     OCTOPUS_URL: ${{ secrets.OCTOPUSSERVERURL }}
     OCTOPUS_SPACE: 'Clare'
     PACKAGE_VERSION: AzureWebApp.1.0.0
    steps:
  - name: Deploy a release in Octopus Deploy üêô
    uses: OctopusDeploy/deploy-release-tenanted-action@v3
    env:
      OCTOPUS_API_KEY: ${{ secrets.API_KEY  }}
      OCTOPUS_URL: ${{ secrets.SERVER }}
      OCTOPUS_SPACE: 'Clare'
    with:
      project: 'Package'
      release_version: '0.0.1'
      environment: 'Test'
      tenants: |
        'A'
        'B'
        'C'
